import{F as P}from"./FairyLoading-BmbdhaJQ.js";import{A as k}from"./AlertMessages-JIZeSrfZ.js";import{_ as v,a as x,c as n,d as l,w as m,b as s,F as y,s as w,r as _,o as r,t as p,f as b,e as A}from"./index-FcHiHiKZ.js";import{c as M}from"./cartStore-miyaYOZU.js";var V={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"dollob_api",BASE_URL:"/Happiness-Breakfast-Day/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:h,VITE_APP_API_NAME:u}=V,E={data(){return{products:[],product:{},pagination:{},isLoading:!1}},components:{FairyLoading:P,AlertMessages:k},methods:{get_products(c=1){this.isLoading=!0;const i=`${h}/api/${u}/products?page=${c}`;this.axios.get(i).then(t=>{const{products:a,pagination:e}=t.data;this.products=a,this.pagination=e}).catch(t=>{this.$refs.AlertMessages.show_alert(t==null?void 0:t.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},get_product(c){this.isLoading=!0;const i=`${h}/api/${u}/product/${c}`;this.axios.get(i).then(t=>{const{product:a}=t.data;this.product=a,this.$refs.userProductModal.show_Model()}).catch(t=>{this.$refs.AlertMessages.show_alert(t==null?void 0:t.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},add_cart(c,i=1,t){let a="",e="";const g=`加入購物車成功，新增${i}筆商品~~`;this.isLoading=!0,t==="new"?(a=`${h}/api/${u}/cart`,e="post"):(a=`${h}/api/${u}/cart/${t}`,e="put");const f={product_id:c,qty:i};this.axios[e](a,{data:f}).then(d=>{this.$refs.AlertMessages.show_toast(g),this.get_cart()}).catch(d=>{this.$refs.AlertMessages.show_alert(d==null?void 0:d.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},...x(M,["get_cart"])},mounted(){this.get_products()}},I={class:"container"},R={class:"my-4"},N={class:"table align-middle border-primary border-top border-start border-end"},U=s("thead",{class:"table-primary"},[s("tr",null,[s("th",null,"圖片"),s("th",null,"商品名稱"),s("th",null,"價格"),s("th")])],-1),B={style:{width:"200px"}},C=["src"],D={key:0,class:"h5"},S={key:1},T={class:"h6"},F={class:"h5"},O={class:"btn-group btn-group-sm"},z={key:0,class:"fas fa-spinner fa-pulse"},H=["onClick"],j={key:0,class:"fas fa-spinner fa-pulse"};function G(c,i,t,a,e,g){const f=_("fairy-loading"),d=_("VueLoading"),L=_("alert-messages"),$=_("RouterLink");return r(),n(y,null,[l(d,{active:e.isLoading},{default:m(()=>[l(f)]),_:1},8,["active"]),l(L,{ref:"AlertMessages"},null,512),s("div",I,[s("div",R,[s("table",N,[U,s("tbody",null,[(r(!0),n(y,null,w(e.products,o=>(r(),n("tr",{key:o.id},[s("td",B,[s("img",{src:o.imageUrl,style:{height:"100px","background-size":"cover","background-position":"center"}},null,8,C)]),s("td",null,p(o.title),1),s("td",null,[o.origin_price===o.price?(r(),n("div",D,p(o.price)+" 元",1)):(r(),n("div",S,[s("del",T,"原價 "+p(o.origin_price)+" 元",1),s("div",F,"現在只要 "+p(o.price)+" 元",1)]))]),s("td",null,[s("div",O,[l($,{class:"btn btn-outline-primary",to:`/product/${o.id}`},{default:m(()=>[e.isLoading?(r(),n("i",z)):b("",!0),A(" 查看更多 ")]),_:2},1032,["to"]),s("button",{type:"button",class:"btn btn-secondary text-white",onClick:J=>g.add_cart(o.id,1,"new")},[e.isLoading?(r(),n("i",j)):b("",!0),A(" 加到購物車 ")],8,H)])])]))),128))])])])])],64)}const Y=v(E,[["render",G]]);export{Y as default};
