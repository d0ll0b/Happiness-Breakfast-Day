import{F as v}from"./FairyLoading-BT3QIXwH.js";import{A as y}from"./AlertMessages-jiiM__sS.js";import{_ as L,e as x,c as r,b as l,w as m,a as t,F as $,j as w,r as _,o as d,t as p}from"./index-Cax4zTSG.js";import{c as M}from"./cartStore-BICCevfF.js";var k={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"dollob_api",BASE_URL:"/Happiness-Breakfast-Day/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:h,VITE_APP_API_NAME:u}=k,E={data(){return{products:[],product:{},pagination:{},isLoading:!1}},components:{FairyLoading:v,AlertMessages:y},methods:{get_products(c=1){this.isLoading=!0;const i=`${h}/api/${u}/products?page=${c}`;this.axios.get(i).then(s=>{const{products:o,pagination:e}=s.data;this.products=o,this.pagination=e}).catch(s=>{this.$refs.AlertMessages.show_alert(s==null?void 0:s.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},get_product(c){this.isLoading=!0;const i=`${h}/api/${u}/product/${c}`;this.axios.get(i).then(s=>{const{product:o}=s.data;this.product=o,this.$refs.userProductModal.show_Model()}).catch(s=>{this.$refs.AlertMessages.show_alert(s==null?void 0:s.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},add_cart(c,i=1,s){let o="",e="";const g=`加入購物車成功，新增${i}筆商品~~`;this.isLoading=!0,s==="new"?(o=`${h}/api/${u}/cart`,e="post"):(o=`${h}/api/${u}/cart/${s}`,e="put");const f={product_id:c,qty:i};this.axios[e](o,{data:f}).then(n=>{this.$refs.AlertMessages.show_toast(g),this.get_cart()}).catch(n=>{this.$refs.AlertMessages.show_alert(n==null?void 0:n.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},...x(M,["get_cart"])},mounted(){this.get_products()}},V={class:"container"},b={class:"my-4"},I=t("h1",{class:"text-primary mb-2"},"全部商品",-1),N={class:"row row-cols-1 row-cols-md-3 g-4 ps-0"},T={class:"card h-100 px-0"},U=["src","alt"],B={class:"card-body"},D={class:"card-title"},R={class:"card-text mt-2"},S={key:0,class:"h5"},C={key:1},F={class:"h5 me-1"},O={class:"h6 text-danger"},j=["onClick"];function H(c,i,s,o,e,g){const f=_("fairy-loading"),n=_("VueLoading"),A=_("alert-messages"),P=_("router-link");return d(),r($,null,[l(n,{active:e.isLoading},{default:m(()=>[l(f)]),_:1},8,["active"]),l(A,{ref:"AlertMessages"},null,512),t("div",V,[t("div",b,[I,t("ul",N,[(d(!0),r($,null,w(e.products,a=>(d(),r("li",{class:"col",key:a.id},[t("div",T,[l(P,{to:`/product/${a.id}`,class:"img-router","data-aos":"flip-left"},{default:m(()=>[t("img",{src:a.imageUrl,class:"card-img-top",alt:a.title},null,8,U)]),_:2},1032,["to"]),t("div",B,[t("h5",D,p(a.title),1),t("div",R,[a.origin_price===a.price?(d(),r("div",S,"NT$"+p(a.price),1)):(d(),r("div",C,[t("span",F,"NT$"+p(a.price),1),t("del",O,"NT$"+p(a.origin_price),1)]))]),t("div",null,[t("button",{class:"btn btn-secondary mt-2 text-light",type:"button",onClick:z=>g.add_cart(a.id,1,"new")},"加入購物車",8,j)])])])]))),128))])])])],64)}const W=L(E,[["render",H]]);export{W as default};
