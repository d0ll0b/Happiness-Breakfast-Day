import{F as P}from"./FairyLoading-DdcXap8q.js";import{A as k}from"./AlertMessages-DfjWVE3-.js";import{_ as v,c as n,b as l,w as m,a as s,F as b,k as M,r as _,o as r,t as p,n as y,d as L}from"./index-DC0eWpiD.js";var x={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"dollob_api",BASE_URL:"/Happiness-Breakfast-Day/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_API_URL:u,VITE_APP_API_NAME:h}=x,V={data(){return{products:[],product:{},pagination:{},isLoading:!1}},components:{FairyLoading:P,AlertMessages:k},methods:{get_products(c=1){this.isLoading=!0;const i=`${u}/api/${h}/products?page=${c}`;this.axios.get(i).then(t=>{const{products:a,pagination:e}=t.data;this.products=a,this.pagination=e}).catch(t=>{this.$refs.AlertMessages.show_alert(t==null?void 0:t.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},get_product(c){this.isLoading=!0;const i=`${u}/api/${h}/product/${c}`;this.axios.get(i).then(t=>{const{product:a}=t.data;this.product=a,this.$refs.userProductModal.show_Model()}).catch(t=>{this.$refs.AlertMessages.show_alert(t==null?void 0:t.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},add_cart(c,i=1,t){let a="",e="";const g=`加入購物車成功，新增${i}筆商品~~`;this.isLoading=!0,t==="new"?(a=`${u}/api/${h}/cart`,e="post"):(a=`${u}/api/${h}/cart/${t}`,e="put");const f={product_id:c,qty:i};this.axios[e](a,{data:f}).then(d=>{this.$refs.AlertMessages.show_toast(g)}).catch(d=>{this.$refs.AlertMessages.show_alert(d==null?void 0:d.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1,this.$refs.userProductModal.hide_Model()})}},mounted(){this.get_products()}},w={class:"container"},E={class:"my-4"},I={class:"table align-middle border-primary border-top border-start border-end"},R=s("thead",{class:"table-primary"},[s("tr",null,[s("th",null,"圖片"),s("th",null,"商品名稱"),s("th",null,"價格"),s("th")])],-1),N={style:{width:"200px"}},U=["src"],B={key:0,class:"h5"},C={key:1},D={class:"h6"},T={class:"h5"},F={class:"btn-group btn-group-sm"},S={key:0,class:"fas fa-spinner fa-pulse"},O=["onClick"],z={key:0,class:"fas fa-spinner fa-pulse"};function H(c,i,t,a,e,g){const f=_("fairy-loading"),d=_("VueLoading"),$=_("alert-messages"),A=_("RouterLink");return r(),n(b,null,[l(d,{active:e.isLoading},{default:m(()=>[l(f)]),_:1},8,["active"]),l($,{ref:"AlertMessages"},null,512),s("div",w,[s("div",E,[s("table",I,[R,s("tbody",null,[(r(!0),n(b,null,M(e.products,o=>(r(),n("tr",{key:o.id},[s("td",N,[s("img",{src:o.imageUrl,style:{height:"100px","background-size":"cover","background-position":"center"}},null,8,U)]),s("td",null,p(o.title),1),s("td",null,[o.origin_price===o.price?(r(),n("div",B,p(o.price)+" 元",1)):(r(),n("div",C,[s("del",D,"原價 "+p(o.origin_price)+" 元",1),s("div",T,"現在只要 "+p(o.price)+" 元",1)]))]),s("td",null,[s("div",F,[l(A,{class:"btn btn-outline-secondary",to:`/product/${o.id}`},{default:m(()=>[e.isLoading?(r(),n("i",S)):y("",!0),L(" 查看更多 ")]),_:2},1032,["to"]),s("button",{type:"button",class:"btn btn-outline-danger",onClick:j=>g.add_cart(o.id,1,"new")},[e.isLoading?(r(),n("i",z)):y("",!0),L(" 加到購物車 ")],8,O)])])]))),128))])])])])],64)}const Q=v(V,[["render",H]]);export{Q as default};
