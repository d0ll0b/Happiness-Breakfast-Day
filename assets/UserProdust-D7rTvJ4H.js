import{F as v}from"./FairyLoading-DdcXap8q.js";import{A as b}from"./AlertMessages-DfjWVE3-.js";import{_ as y,c as A,b as _,w as P,a as s,t as n,d as r,p as x,v as w,F as L,r as p,o as V}from"./index-DC0eWpiD.js";var E={VITE_APP_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_APP_API_NAME:"dollob_api",BASE_URL:"/Happiness-Breakfast-Day/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let g="";const{VITE_APP_API_URL:u,VITE_APP_API_NAME:h}=E,M={data(){return{product:{},qty:1,isLoading:!1}},components:{FairyLoading:v,AlertMessages:b},methods:{get_product(){this.isLoading=!0;const o=`${u}/api/${h}/product/${g}`;this.axios.get(o).then(e=>{const{product:a}=e.data;this.product=a}).catch(e=>{this.$refs.AlertMessages.show_alert(e==null?void 0:e.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},add_cart(o,e=1,a){let l="",t="";const c=`加入購物車成功，新增${e}筆商品~~`;this.isLoading=!0,a==="new"?(l=`${u}/api/${h}/cart`,t="post"):(l=`${u}/api/${h}/cart/${a}`,t="put");const d={product_id:o,qty:e};this.axios[t](l,{data:d}).then(i=>{this.$refs.AlertMessages.show_toast(c)}).catch(i=>{this.$refs.AlertMessages.show_alert(i==null?void 0:i.response.data.message,1300,"error")}).finally(()=>{this.isLoading=!1})},toastMsg(o){this.$refs.messageToast.show_toast(o)}},mounted(){g=this.$route.params.id,this.get_product()}},I=s("h1",null,"產品頁面",-1),T={class:"bg-primary text-white rounded-pill py-1 mb-1"},U={class:"h5 mb-0"},D={class:"mb-1"},$={class:"row"},B={class:"col-sm-6"},N=["src"],R={class:"col-sm-6 text-start d-flex flex-column justify-content-between"},k={class:"badge bg-primary rounded-pill"},F=s("br",null,null,-1),S=s("br",null,null,-1),q=s("br",null,null,-1),C={class:"h6"},O={class:"h5"},j={class:"input-group mt-3"};function H(o,e,a,l,t,c){const d=p("fairy-loading"),i=p("VueLoading"),f=p("alert-messages");return V(),A(L,null,[I,_(i,{active:t.isLoading},{default:P(()=>[_(d)]),_:1},8,["active"]),_(f,{ref:"AlertMessages"},null,512),s("div",T,[s("div",U,[s("span",null,n(t.product.title),1)])]),s("div",D,[s("div",$,[s("div",B,[s("img",{class:"img-fluid",src:t.product.imageUrl,alt:""},null,8,N)]),s("div",R,[s("div",null,[s("span",k,n(t.product.category),1),s("p",null,[r("商品描述："),F,r(n(t.product.description),1)]),S,s("p",null,[r("商品內容："),q,r(n(t.product.content),1)])]),s("div",null,[s("del",C,"原價 "+n(t.product.origin_price)+" 元",1),s("div",O,"現在只要 "+n(t.product.price)+" 元",1),s("div",null,[s("div",j,[x(s("input",{type:"number",class:"form-control",min:"1","onUpdate:modelValue":e[0]||(e[0]=m=>t.qty=m)},null,512),[[w,t.qty,void 0,{number:!0}]]),s("button",{type:"button",class:"btn btn-primary",onClick:e[1]||(e[1]=m=>c.add_cart(t.product.id,t.qty,"new"))},"加入購物車")])])])])])])],64)}const K=y(M,[["render",H]]);export{K as default};
